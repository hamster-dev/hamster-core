# How to use:
# > source user.env  # push private data into env vars
# > tox
# > celery -A hamster ...
# > tox -e with-broker
#
# Can pass py.test params by separating with double-dash:
# > tox -- --pdb

[tox]
envlist = py34

[testenv]
deps =
    -rrequirements.txt
    -rrequirements-test.txt
passenv = HAMSTER_*
commands =
    py.test hamster/github_api/tests {posargs}
    py.test hamster/pipeline_django/tests {posargs}

[testenv:with-broker]
# you need to start celery first. see tests/integration/conftest.py for details
commands =
    py.test hamster/github_api/tests/integration
setenv =
    HAMSTER_TEST_USE_BROKER = 1
